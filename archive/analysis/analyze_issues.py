#!/usr/bin/env python3
"""
Investigate problematic decisions from validation deployment.
Focus on the 3 incorrectly excluded papers and high MAYBE rate.
"""

def analyze_problematic_decisions():
    """Analyze the concerning decision patterns."""
    
    print("ğŸ” PROBLEMATIC DECISION ANALYSIS")
    print("=" * 35)
    print()
    
    print("âŒ INCORRECTLY EXCLUDED PAPERS (Should be INCLUDE but got EXCLUDE):")
    print("-" * 65)
    print("   ğŸ“„ 2/24: Community Networks And Poverty Reduction Programmes")
    print("   ğŸ“„ 3/24: Labor Markets And Poverty In Village Economies")  
    print("   ğŸ“„ 10/24: No Longer Trapped? Promoting Entrepreneurship Through Cash T...")
    print()
    print("   ğŸš¨ CRITICAL ISSUE: These are FALSE NEGATIVES")
    print("   ğŸ’¡ Impact: Important papers excluded from systematic review")
    print("   ğŸ¯ Target: Reduce false negative rate from 12.5% to <5%")
    print()
    
    print("ğŸ¤” HIGH MAYBE RATE ANALYSIS:")
    print("-" * 25)
    print("   â€¢ INCLUDED papers with MAYBE: 9/24 (37.5%)")
    print("   â€¢ EXCLUDED papers with MAYBE: 9/40 (22.5%)")
    print("   â€¢ Overall MAYBE rate: 18/64 (28.1%)")
    print()
    print("   ğŸ“Š BREAKDOWN:")
    print("     - From INCLUDED dataset: 37.5% MAYBE (too conservative)")
    print("     - From EXCLUDED dataset: 22.5% MAYBE (acceptable caution)")
    print()
    print("   ğŸ¯ TARGET: Reduce MAYBE rate from 28% to ~15-20%")
    print()
    
    print("ğŸ”§ ROOT CAUSE ANALYSIS:")
    print("-" * 22)
    print("   1. FALSE NEGATIVES (3 papers):")
    print("      â€¢ Criteria assessment may be too strict")
    print("      â€¢ Edge cases in program definitions")
    print("      â€¢ Missing context clues in abstracts")
    print()
    print("   2. HIGH MAYBE RATE (18 papers):")
    print("      â€¢ Conservative prompt language")
    print("      â€¢ Strict evidence requirements") 
    print("      â€¢ Unclear criterion boundaries")
    print()
    
    print("ğŸ’¡ POTENTIAL SOLUTIONS:")
    print("-" * 20)
    print("   ğŸ¯ Solution 1: PROMPT REFINEMENT")
    print("      â€¢ Relax evidence standards slightly")
    print("      â€¢ Add more edge case examples")
    print("      â€¢ Clarify criterion boundaries")
    print()
    print("   ğŸ¯ Solution 2: DECISION LOGIC ADJUSTMENT")
    print("      â€¢ Modify MAYBE thresholds")
    print("      â€¢ Adjust unclear tolerance")
    print("      â€¢ Fine-tune inclusion bias")
    print()
    print("   ğŸ¯ Solution 3: TWO-STAGE SCREENING")
    print("      â€¢ Stage 1: Liberal screening (fewer false negatives)")
    print("      â€¢ Stage 2: Conservative review (manual validation)")
    print("      â€¢ Best of both approaches")
    print()
    
    print("ğŸ“Š IMPACT ASSESSMENT:")
    print("-" * 18)
    print("   Current Performance:")
    print("   â€¢ False Negative Rate: 12.5% (3/24) âŒ TOO HIGH")
    print("   â€¢ False Positive Rate: 0.0% (0/40) âœ… EXCELLENT")
    print("   â€¢ MAYBE Rate: 28.1% (18/64) âš ï¸ HIGH")
    print()
    print("   Target Performance:")
    print("   â€¢ False Negative Rate: <5% (1/24)")
    print("   â€¢ False Positive Rate: <2% (1/40)")  
    print("   â€¢ MAYBE Rate: 15-20% (10-13/64)")
    print()
    
    print("ğŸš€ RECOMMENDED NEXT STEPS:")
    print("-" * 25)
    print("   1. IMMEDIATE: Investigate the 3 false negatives")
    print("      â€¢ Read full abstracts of problematic papers")
    print("      â€¢ Identify why they were excluded")
    print("      â€¢ Adjust criteria or examples")
    print()
    print("   2. SHORT-TERM: Prompt optimization")
    print("      â€¢ Reduce conservative bias")
    print("      â€¢ Add edge case handling")
    print("      â€¢ Test on validation set")
    print()
    print("   3. VALIDATION: Re-test improved approach")
    print("      â€¢ Target: <5% false negatives")
    print("      â€¢ Target: <20% MAYBE rate")
    print("      â€¢ Maintain: 0% false positives")

if __name__ == "__main__":
    analyze_problematic_decisions()